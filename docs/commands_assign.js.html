<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>commands/assign.js | Pronto</title>

    <link type="text/css" rel="stylesheet" href="styles/vendor/prism-monokai.css" />

    <link type="text/css" rel="stylesheet" href="styles/styles.css" />

    <link type="image/x-icon" rel="icon" href="favicon.svg" />

    <style>
      :root {


        --primary-colour: #ffd456;


        --secondary-colour: #ffd456;


        --selection-text-colour: #000;

      }
    </style>
  </head>
  <body>
    <header class="layout-header">
      <a href="./index.html">
        <img src="logo.svg" alt="Pronto logo" />
      </a>

      <h1>
        <a href="./index.html"> Pronto </a>
      </h1>
      <nav class="layout-nav">
        <ul>
          <li class="nav-heading">Links</li>
          <li class="nav-item"><a href="https://github.com/JamesNZL/Pronto" target="_blank">GitHub Repository</a></li>
        </ul>
        <ul>
          <li class="nav-heading">Externals</li>
          <li class="nav-heading">
            <span class="nav-item-type type-external" title="external">E</span><span class="nav-item-name is-external"><a href="external-Discord.html">Discord</a></span>
          </li>
          <li class="nav-heading">
            <span class="nav-item-type type-external" title="external">E</span><span class="nav-item-name is-external"><a href="external-mongoose.html">mongoose</a></span>
          </li>
          <li class="nav-heading">
            <span class="nav-item-type type-external" title="external">E</span><span class="nav-item-name is-external"><a href="external-NodeJS.html">NodeJS</a></span>
          </li>
        </ul>
        <ul>
          <li class="nav-heading">Namespaces</li>
          <li class="nav-heading">
            <span class="nav-item-type type-namespace" title="namespace">N</span><span class="nav-item-name is-namespace"><a href="commands.html">commands</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="commands.html#.approve">approve</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="commands.html#.archive">archive</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="commands.html#.assign">assign</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="commands.html#.attendance">attendance</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="commands.html#.connected">connected</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="commands.html#.evaluate">evaluate</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="commands.html#.help">help</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="commands.html#.leave">leave</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="commands.html#.leavefor">leavefor</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="commands.html#.lesson">lesson</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="commands.html#.ping">ping</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="commands.html#.purge">purge</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="commands.html#.restart">restart</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="commands.html#.seen">seen</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="commands.html#.uptime">uptime</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="commands.html#.BaseCommand">BaseCommand</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="commands.html#.BaseCommands">BaseCommands</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="commands.html#.Command">Command</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="commands.html#.CommandDescription">CommandDescription</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="commands.html#.CommandExecute">CommandExecute</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="commands.html#.CommandName">CommandName</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="commands.html#.CommandParameters">CommandParameters</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="commands.html#.Commands">Commands</a></span>
          </li>
          <li class="nav-heading">
            <span class="nav-item-type type-namespace" title="namespace">N</span><span class="nav-item-name is-namespace"><a href="config.html">config</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="config.html#.Configuration">Configuration</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="config.html#.DefaultChannel">DefaultChannel</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="config.html#.DefaultChannelType">DefaultChannelType</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="config.html#.DefaultRole">DefaultRole</a></span>
          </li>
          <li class="nav-heading">
            <span class="nav-item-type type-namespace" title="namespace">N</span><span class="nav-item-name is-namespace"><a href="events.html">events</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.exit">exit</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onBulkDelete">onBulkDelete</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onError">onError</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onGuildCreate">onGuildCreate</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onGuildDelete">onGuildDelete</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onMemberAdd">onMemberAdd</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onMemberBan">onMemberBan</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onMemberRemove">onMemberRemove</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onMemberUpdate">onMemberUpdate</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onMessage">onMessage</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onMessageDelete">onMessageDelete</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onMessageUpdate">onMessageUpdate</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onReactionAdd">onReactionAdd</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onReady">onReady</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onRoleInteraction">onRoleInteraction</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onRoleUpdate">onRoleUpdate</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="events.html#.onVoiceUpdate">onVoiceUpdate</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="events.html#.EventHandler">EventHandler</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="events.html#.EventModule">EventModule</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="events.html#.EventModules">EventModules</a></span>
          </li>
          <li class="nav-heading">
            <span class="nav-item-type type-namespace" title="namespace">N</span><span class="nav-item-name is-namespace"><a href="handlers.html">handlers</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.channelPairing">channelPairing</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.commandError">commandError</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.commandHandler">commandHandler</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.confirmWithReaction">confirmWithReaction</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.createEmbed">createEmbed</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.createGuild">createGuild</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.debugError">debugError</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.deleteMsg">deleteMsg</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.directCommandError">directCommandError</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.embedScaffold">embedScaffold</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.emojiReact">emojiReact</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.errorReact">errorReact</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.findGuildConfiguration">findGuildConfiguration</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.getRoleError">getRoleError</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.lessonInstructions">lessonInstructions</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.lessonReminders">lessonReminders</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.manageAttendance">manageAttendance</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.overwriteCommands">overwriteCommands</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.permissionsCheck">permissionsCheck</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.permissionsHandler">permissionsHandler</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.purgeChannel">purgeChannel</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.removeGuild">removeGuild</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.sendDirect">sendDirect</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.sendMsg">sendMsg</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.successReact">successReact</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.unsubmittedLessons">unsubmittedLessons</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.updateUnsubmitted">updateUnsubmitted</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.upsertCommands">upsertCommands</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="handlers.html#.verifyBotPermissions">verifyBotPermissions</a></span>
          </li>
          <li class="nav-heading">
            <span class="nav-item-type type-namespace" title="namespace">N</span><span class="nav-item-name is-namespace"><a href="models.html">models</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="models.html#.Attendance">Attendance</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="models.html#.ChannelPair">ChannelPair</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="models.html#.Colours">Colours</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="models.html#.Emoji">Emoji</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="models.html#.GuildConfiguration">GuildConfiguration</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="models.html#.Instructors">Instructors</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="models.html#.Lesson">Lesson</a></span>
          </li>
          <li class="nav-heading">
            <span class="nav-item-type type-namespace" title="namespace">N</span><span class="nav-item-name is-namespace"><a href="modules.html">modules</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.charLimit">charLimit</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.dateTimeGroup">dateTimeGroup</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.difference">difference</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.enumerateResources">enumerateResources</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.equals">equals</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.extractID">extractID</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.formatDuration">formatDuration</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.formatList">formatList</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.formatRoles">formatRoles</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.isURL">isURL</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.jsCodeBlock">jsCodeBlock</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.merge">merge</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.prefixCommand">prefixCommand</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.processResources">processResources</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.remove">remove</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.sentenceCase">sentenceCase</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.sortMembersByRoles">sortMembersByRoles</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.titleCase">titleCase</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="modules.html#.updatedPermissions">updatedPermissions</a></span>
          </li>
          <li class="nav-heading">
            <span class="nav-item-type type-namespace" title="namespace">N</span><span class="nav-item-name is-namespace"><a href="pronto.html">pronto</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="pronto.html#.bot">bot</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="pronto.html#.version">version</a></span>
          </li>
          <li class="nav-item">
            <span class="nav-item-type type-typedef" title="typedef">T</span><span class="nav-item-name is-typedef"><a href="pronto.html#.Client">Client</a></span>
          </li>
        </ul>
      </nav>
    </header>

    <main class="layout-main  layout-content--source">
      <div class="container">
        <p class="page-kind">source</p>
        <h1 class="page-title">commands/assign.js</h1>

        <h3><a href="https://github.com/JamesNZL/Pronto/blob/major-refactor-v5/commands/assign.js" target="_blank">View on GitHub</a></h3>

        <section>
          <article>
            <pre id="source" class="source-page line-numbers"><code class="language-js">'use strict';

const Discord = require('discord.js');
// eslint-disable-next-line no-unused-vars
const Typings = require('../typings');
const mongoose = require('mongoose');

// Import chrono-node to schedule weekly lesson reminders
let chrono = require('chrono-node');
chrono = new chrono.Chrono(chrono.en.createConfiguration(false, true));

const { Lesson } = require('../models');
const { dateTimeGroup, enumerateResources, isURL, processResources, titleCase } = require('../modules');
const { commandError, confirmWithReaction, createEmbed, deleteMsg, findGuildConfiguration, sendDirect, sendMsg, successReact, unsubmittedLessons } = require('../handlers');

/**
 * Set to ensure that each assigner (identified by their \&lt;User.id>) does not attempt to assign more than one lesson at a time
 * @type {Set&lt;Discord.Snowflake>}
 * @memberof commands.assign
 */
const recentlyAssigned = new Set();

/**
 * @member {commands.Command} commands.assign Assign a lesson to specified instructors by creating a private lesson channel and dispatching a lesson warning
 */

/**
 * Complete the \&lt;Command> object from a \&lt;BaseCommand>
 * @param {Discord.Guild} guild The \&lt;Guild> that the member shares with the bot
 * @returns {Promise&lt;Typings.Command>} The complete \&lt;Command> object with a \&lt;Command.execute()> method
 */
module.exports = async guild => {
	const { ids: { lessonsID, trainingIDs }, commands: { seen, assign }, colours, emojis } = await findGuildConfiguration(guild);

	/**
	 * @param {Typings.CommandParameters} parameters The \&lt;CommandParameters> to execute this command
	 */
	assign.execute = async ({ msg }) => {
		const { bot } = require('../pronto');

		// Extract mentioned members
		const lessonInstructors = msg.mentions.members;

		try {
			// Ensure there was at least one member mentioned
			if (lessonInstructors.size === 0) throw 'You must tag a user.';

			// Ensure no mentioned members are a bot
			else if (lessonInstructors.some(mention => mention.user.bot)) throw 'You cannot assign a lesson to a bot!';

			// Ensure the assigner does not already exist in the recentlyAssigned set
			else if (recentlyAssigned.has(msg.author.id)) throw 'You are already assigning a lesson!';
		}

		catch (error) { return commandError(msg, error, assign.error); }

		// Delete the command message
		deleteMsg(msg);

		// Add the assigner's ID to the recentlyAssigned set
		// This ensures that each assigner cannot attempt to assign more than one lesson at a time
		recentlyAssigned.add(msg.author.id);

		// Create assign embed
		const assignEmbed = new Discord.MessageEmbed()
			.setTitle('Assigning Lesson...')
			.setAuthor(msg.member.displayName, msg.author.displayAvatarURL({ dynamic: true }))
			.setColor(colours.success)
			.setDescription('Type `restart` to start again, or `cancel` to abort.')
			// Resolve the mentioned members into a formatted string and add new field
			.addField('Instructor(s)', processMentions(lessonInstructors))
			.setFooter(await dateTimeGroup());

		// Send the assign embed
		sendDirect(msg.author, { embeds: [assignEmbed] }, msg.channel);

		// Object defining the required inputs to properly assign a lesson
		// Object keys represent the type of data retained - the object is passed into the getUserInput() function, which returns an object with matching keys storing the user's input
		const neededInputs = {
			lessonName: {
				prompt: 'What is the name of the lesson?',
				type: 'TEXT',
				allowMultiple: false,
			},
			dueTimestamp: {
				prompt: 'When is the lesson plan due?',
				type: 'DATE',
				allowMultiple: false,
			},
			lessonTimestamp: {
				prompt: 'When will the lesson be taught?',
				type: 'DATE',
				allowMultiple: false,
			},
			resources: {
				prompt: 'Provide any resources for the lesson if applicable.\n\nReply `done` when finished.',
				type: 'ATTACHMENT',
				allowMultiple: true,
			},
		};

		// Pass the neededInputs object into the getUserInput() function to collect user's input
		const userInput = await getUserInput(msg, neededInputs, colours);

		// If getUserInput() returns the symbol 'CANCEL', cancel the assigning of the lesson
		if (userInput === 'CANCEL') {
			// Create cancellation embed
			const cancelEmbed = new Discord.MessageEmbed()
				.setAuthor(bot.user.tag, bot.user.avatarURL({ dynamic: true }))
				.setColor(colours.error)
				.setDescription('**Cancelled.**')
				.setFooter(await dateTimeGroup());

			// Remove the assigner's ID from the recentlyAssigned set
			recentlyAssigned.delete(msg.author.id);

			// Send the cancellation embed and cease further execution
			return sendDirect(msg.author, { embeds: [cancelEmbed] }, null, true);
		}

		// Destructure desired user's input from the returned value of the getUserInput() function
		const { lessonName, dueTimestamp, lessonTimestamp, resources } = userInput;

		// Obtain and store formatted date-time groups from parsed time stamps
		const dueDate = await dateTimeGroup(dueTimestamp);
		const lessonDate = await dateTimeGroup(lessonTimestamp);

		// Create lesson assignment confirmation embed
		const lessonEmbed = new Discord.MessageEmbed()
			.setTitle(`Lesson Assignment - ${lessonName}`)
			.setAuthor(msg.member.displayName, msg.author.displayAvatarURL({ dynamic: true }))
			.setColor(colours.warn)
			// Call processMentions() to format the lesson instructors
			.addField('Instructor(s)', processMentions(lessonInstructors))
			.addField('Lesson', lessonName)
			.addField('Lesson Plan Due', dueDate)
			.addField('Lesson Date', lessonDate)
			// Call modules.enumerateResources() to format and output the lesson resources
			.addField('Resources', enumerateResources(resources, true))
			.setFooter('Use the reactions below to confirm or cancel.');

		// Send the lesson assignment confirmation embed to the assigner
		sendDirect(msg.author, { embeds: [lessonEmbed] }, null, true)
			.then(dm => {
				/**
				 * Create a private lesson channel for specified instructors and dispatch the lesson warning, as well as a message to request acknowledgement from the instructor(s)
				 * @function commands.assign~assignLesson
				 */
				const assignLesson = async () => {
					/**
					 * Set channel topic to be a list of the instructor(s)'s mentions, and create the channel under the lessons category channel
					 * @type {Discord.GuildChannelCreateOptions}
					 */
					const channelOptions = { topic: processMentions(lessonInstructors), parent: lessonsID };

					// Create the private lesson channel, with a name matching the lesson name and with the above channel options
					// '.' in lesson name are invalid characters for channel names, therefore substitute them with '-'
					await guild.channels.create(lessonName.replace('.', '-'), channelOptions)
						.then(async channel => {
							// Once the channel has been created, ensure the correct visibility permissions are applied
							// Make the channel private for all users other than the bot, training cell, and instructors
							await channel.createOverwrite(bot.user.id, { 'VIEW_CHANNEL': true });
							channel.createOverwrite(guild.roles.everyone, { 'VIEW_CHANNEL': false });
							trainingIDs.forEach(staff => channel.createOverwrite(staff, { 'VIEW_CHANNEL': true }));
							lessonInstructors.each(instructor => channel.createOverwrite(instructor, { 'VIEW_CHANNEL': true }));

							// Create and save a new database entry for the lesson
							saveLesson(channel.id);

							// Remove the assigner's ID from the recentlyAssigned set now that lesson assignment has been completed
							recentlyAssigned.delete(msg.author.id);

							// Modify the lesson assignment confirmation embed to repurpose it into the lesson warning embed
							lessonEmbed.setTitle(`Lesson Warning - ${lessonName}`);
							lessonEmbed.setDescription('You have been assigned a lesson, use this channel to organise yourself.');
							lessonEmbed.setFooter(await dateTimeGroup());

							// If there is only one instructor, set the author of the lesson warning embed to be the instructor's name and display avatar
							if (lessonInstructors.size === 1) lessonEmbed.setAuthor(lessonInstructors.first().displayName, lessonInstructors.first().user.displayAvatarURL({ dynamic: true }));
							// Otherwise, if there are multiple instructors, set the author to be the guild's name and guild icon
							else lessonEmbed.setAuthor(guild.name, guild.iconURL({ dynamic: true }));

							// Send the lesson warning embed to the private lesson channel
							await sendMsg(channel, { embeds: [lessonEmbed] });
							// Call handlers.unsubmittedLessons() to update the master unsubmitted lessons tracker embed
							unsubmittedLessons(guild);

							// Retrieve the guild's success emoji
							const successEmoji = msg.guild.emojis.cache.find(emoji => emoji.name === emojis.success.name);

							// Create a new embed to prompt the instructor(s)'s acknowledgement of the lesson warning
							const ackEmbed = new Discord.MessageEmbed()
								.setDescription(`Click the ${successEmoji} to acknowledge receipt of this lesson warning.\n\nAlternatively, you can manually type \`!seen\`.`)
								.setColor(colours.primary);

							// Send the acknowledgement embed, and tag each instructor in the message body
							sendMsg(channel, { content: processMentions(lessonInstructors), embeds: [ackEmbed] })
								.then(async ackMessage => {
									// Add the success reaction to the acknowledgement message
									await successReact(ackMessage);

									// Filter reaction collector for reactions only of the success emoji, and that are made by an instructor
									const filter = (reaction, user) => reaction.emoji.name === emojis.success.name &amp;&amp; lessonInstructors.has(user.id);
									// Create a new reaction collector on the acknowledgement message with the filter applied
									const collector = ackMessage.createReactionCollector(filter, { dispose: true });

									// Execute the commands\seen.js &lt;Command> when an instructor acknowledges the lesson warning via reaction
									collector.on('collect', async (_, user) => bot.commands.get(seen.command).execute({ msg: ackMessage, user: user }));
								});
						})
						.catch(error => console.error(`Error creating ${lessonName} in ${guild.name}\n`, error));
				};

				/**
				 * Remove the assigner's ID from the recentlyAssigned set
				 * @function commands.assign~assignCancelled
				 */
				const assignCancelled = () => recentlyAssigned.delete(msg.author.id);

				// Call handlers.confirmWithReaction() on the lesson assignment confirmation embed with assignLesson() and assignCancelled() as callbacks
				return confirmWithReaction(msg, dm, assignLesson, assignCancelled);
			});

		/**
		 * Create a new mongoose \&lt;Lesson> document for the assigned lesson
		 * @function commands.assign~saveLesson
		 * @param {Discord.Snowflake} channelID The \&lt;TextChannel.id> of the private lesson channel created for the lesson
		 * @returns {Promise&lt;Typings.Lesson>} The mongoose document for the lesson
		 */
		async function saveLesson(channelID) {
			// For each instructor, create a new nested object within the instructors object with an ID property and a boolean flag to record acknowledgement status
			const instructors = Object.fromEntries(
				lessonInstructors.map(mention => [mention.id, {
					id: mention.id,
					seen: false,
				}]),
			);

			/**
			 * Create a new \&lt;Lesson> document
			 * @type {Typings.Lesson}
			 */
			const lesson = await new Lesson({
				_id: new mongoose.Types.ObjectId(),
				lessonID: channelID,
				lessonName,
				instructors,
				dueDate,
				dueTimestamp,
				lessonDate,
				lessonTimestamp,
				assignedResources: enumerateResources(resources),
			});

			// Save the &lt;Lesson> document and return it
			return await lesson.save().catch(error => console.error(error));
		}
	};

	return assign;
};

/**
 * @typedef {'TEXT' | 'DATE' | 'ATTCHMENT'} commands.assign.InputType A \&lt;string> representation of the type of input
 * - Text inputs only require an input, with no additional error checking
 * - Date inputs are parsed through chrono to ensure a valid date is recognised and return a Unix timestamp (ms)
 * - Attachments allow attachments to be uploaded or URLs to be entered, with appropriate error checking
 */

/**
 * Collect the all the required inputs from the user and return an object with their completed inputs
 * @function commands.assign~getUserInput
 * @param {Discord.Message} msg The \&lt;Message> that executed the \&lt;Command>
 * @param {Object.&lt;string, {prompt: string, type: commands.assign.InputType, allowMultiple: boolean}>} prompts An object defining the individual inputs to prompt for
 * - Must contain an object.prompt property of type \&lt;string>
 * - Must contain an object.type property for the type of input of type \&lt;string>: `TEXT` || `DATE` || `ATTACHMENT`
 * - Must contain an object.allowMultiple \&lt;boolean>: `true` || `false`
 * - Text inputs only require an input, with no additional error checking
 * - Date inputs are parsed through chrono to ensure a valid date is recognised and return a Unix timestamp (ms)
 * - Attachments allow attachments to be uploaded or URLs to be entered, with appropriate error checking
 * @param {Typings.Colours} colours The guild's colour object
 * @returns {Promise&lt;Object.&lt;string, string | number> | 'CANCEL'>} An object with the user's completed inputs stored in each respective property, or the symbol `CANCEL` to represent a cancelled lesson assignment
 */
async function getUserInput(msg, prompts, colours) {
	// Initialise an empty object in preparation to store the user's input to each property of prompts as they are completed individually in turn
	const input = {};

	// Loop through each needed input prompt
	for (const [key, value] of Object.entries(prompts)) {
		// If the current prompt allows for multiple inputs, call the whileLoop() function
		if (value.allowMultiple) input[key] = await whileLoop(createEmbed(value.prompt, colours.primary), msg, value.type, colours, value.allowMultiple);
		// Otherwise, call the msgPrompt() function
		else input[key] = await msgPrompt(createEmbed(value.prompt, colours.primary), msg, value.type, colours, value.allowMultiple);

		try {
			// If the received symbol is to 'RESTART', restart input by returning getUserInput() recursively
			if (input[key] === 'RESTART') return await getUserInput(msg, prompts, colours);
			// Otherwise, if the received symbol is to 'CANCEL', return the same symbol from getUserInput()
			else if (input[key] === 'CANCEL') return 'CANCEL';
		}
		catch { null; }
	}

	// If all inputs have been successfully completed, return the completed input object
	return input;
}

/**
 * Display a prompt to the user and collect &amp; process their input according to the type of input
 * @function commands.assign~msgPrompt
 * @param {Discord.MessageEmbed} prompt The embed to use to prompt the user for the input
 * @param {Discord.Message} msg The \&lt;Message> that executed the \&lt;Command>
 * @param {commands.assign.InputType} type The type of input being prompted for: `TEXT` || `DATE` || `ATTACHMENT`
 * @param {Typings.Colours} colours The guild's colour object
 * @param {boolean} allowMultiple Whether to allow multiple inputs
 * @returns {Promise&lt;string | number | 'RESTART' | 'CANCEL' | 'DONE'>} The user's input, or the symbols `RESTART` || `CANCEL` || `DONE`
 * - Text inputs return a \&lt;string>
 * - Date inputs return a Unix timestamp (ms) as \&lt;number>
 * - Attachments return a URL formatted as a hyperlink using [`modules.processResources()`]{@link modules.processResources} as \&lt;string>
 * - `RESTART` = restart input from the beginning
 * - `CANCEL` = cancel lesson assignment
 * - `DONE` = attachment input is complete
 */
async function msgPrompt(prompt, msg, type, colours, allowMultiple) {
	// Filter message collector for messages only sent by command author
	const filter = message => message.author.id === msg.author.id;

	// Send the prompt embed to the user, and await the user's input
	// Use Promise.all() to wait for the user's input before proceeding
	const input = await Promise.all([
		sendDirect(msg.author, { embeds: [prompt] }, null, true),
		msg.author.dmChannel.awaitMessages(filter, { max: 1 }),
	])
		// Extract the user's input from the resolved Promises
		.then(resolved => resolved[1].first());


	// Use a try {} catch {} block to utilise throw
	try {
		// If the user desires to restart or cancel input, return the appropriate symbol
		if (input.content.toLowerCase() === 'restart') throw 'RESTART';
		else if (input.content.toLowerCase() === 'cancel') throw 'CANCEL';
		// Otherwise, if the user has completed their multiple inputs, and the current prompt allows multiple inputs (such that 'done' is a keyword), return the 'DONE' symbol
		else if (input.content.toLowerCase() === 'done' &amp;&amp; allowMultiple) throw 'DONE';

		if (type === 'TEXT' || type === 'DATE') {
			// If the type of input to be validated is 'TEXT' or 'DATE', ensure the input is not empty
			// Uploaded attachments have a null &lt;Message.content>, so cannot be checked here
			if (!input.content) {
				// If the input is empty, send an error and try again
				sendDirect(msg.author, { embeds: [createEmbed('You must enter something!', colours.error)] }, null, true);
				throw await msgPrompt(prompt, msg, type, colours, allowMultiple);
			}

			// If the input is of type 'DATE', try to parse the date and obtain a Unix timestamp
			if (type === 'DATE') {
				const parsedDate = chrono.parseDate(input.content);

				// If no date has been successfully parsed, send an error and try again
				if (!parsedDate) {
					sendDirect(msg.author, { embeds: [createEmbed('I don\'t recognise that date, please try again.', colours.error)] }, null, true);
					throw await msgPrompt(prompt, msg, type, colours, allowMultiple);
				}

				// If a date has been successfully parsed, return its Unix (ms) timestamp
				throw parsedDate.setHours(18, 0, 0, 0).valueOf();
			}

			// If the input is of type 'TEXT' and is not empty, return it through modules.titleCase()
			throw titleCase(input.content);
		}

		else if (type === 'ATTACHMENT') {
			// Otherwise, if the input is of type 'ATTACHMENT', parse the input for URLs and check for uploaded attachments
			const substrings = input.content.split(/ +/);
			const attachments = input.attachments.first();
			// Filter the substrings of the input message for URLs
			const urls = substrings.filter(substr => isURL(substr));

			// If there have not been any attachments uploaded and no URLs have been successfully parsed, send an error and try again
			if (!attachments &amp;&amp; !urls.length) {
				sendDirect(msg.author, { embeds: [createEmbed('You must attach a file or enter a URL!', colours.error)] }, null, true);
				throw await msgPrompt(prompt, msg, type, colours, allowMultiple);
			}

			// Otherwise, if there have successfully been attachments and/or URLs input, return it through modules.processResources()
			throw processResources(attachments, urls);
		}
	}

	catch (thrown) { return thrown; }
}

/**
 * Implements a loop to allow multiple inputs for a given prompt, which are returned in an array
 * @function commands.assign~whileLoop
 * @param {Discord.MessageEmbed} prompt The embed to use to prompt the user for the input
 * @param {Discord.Message} msg The \&lt;Message> that executed the \&lt;Command>
 * @param {commands.assign.InputType} type The type of input being prompted for: `TEXT` || `DATE` || `ATTACHMENT`
 * @param {Typings.Colours} colours The guild's colour object
 * @param {boolean} allowMultiple Whether to allow multiple inputs
 * @returns {Promise&lt;string[] | number[] | 'RESTART' | 'CANCEL'>} An array of the user's inputs, or the symbols `RESTART` || `CANCEL`
 * - The type stored within the array is dependent on the input type returned by msgPrompt()
 * - `RESTART` = restart input from the beginning
 * - `CANCEL` = cancel lesson assignment
 */
async function whileLoop(prompt, msg, type, colours, allowMultiple) {
	// Initialise an empty array to store the user's multiple inputs
	const array = [];

	/**
	 * A recursive function which repeatedly prompts the user for input until loop is ended
	 * @returns {Promise&lt;string[] | number[] | 'RESTART' | 'CANCEL'>} An array of the user's inputs, or the symbols `RESTART` || `CANCEL`
	 * - The type stored within the array is dependent on the input type returned by msgPrompt()
	 * - `RESTART` = restart input from the beginning
	 * - `CANCEL` = cancel lesson assignment
	 */
	async function loop() {
		// Call the msgPrompt() function and collect &amp; process the user's input
		const input = await msgPrompt(prompt, msg, type, colours, allowMultiple);

		// If the user desires to restart or cancel input, return the appropriate symbol
		if (input === 'RESTART') return 'RESTART';
		else if (input === 'CANCEL') return 'CANCEL';

		// Otherwise, if the user has completed input, return the array
		else if (input === 'DONE') return array;

		// Otherwise, if the user has yet to complete input, push the new input to the array and loop again
		else {
			array.push(input);
			return await loop(prompt, msg, type);
		}
	}

	return await loop();
}

/**
 * Process a Collection\&lt;GuildMember.Snowflake, GuildMember> into a formatted string of user mentions
 * @function commands.assign~processMentions
 * @param {Discord.Collection&lt;Discord.Snowflake, Discord.GuildMember>} members A Collection\&lt;GuildMember.Snowflake, GuildMember> to process
 * @returns {string} A newline-delimited string of formatted user mentions
 */
function processMentions(members) {
	// Map the &lt;GuildMember> instances to a new string[] of mentions, then join the string[] with a newline separator
	return members.map(member => member.toString())
		.join('\n');
}</code></pre>
          </article>
        </section>
      </div>
    </main>

    <footer class="layout-footer">
      <div class="container">Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Wed Dec 15 2021 00:38:47 GMT+1300 (New Zealand Daylight Time)</div>
    </footer>

    <script src="scripts/prism.dev.js"></script>
  </body>
</html>
